import{j as e}from"./index-M9bdpqMz.js";import{b as i}from"./vendor-Chw79xPl.js";const T=({items:l})=>e.jsx("nav",{className:"flex mb-4 text-sm",children:l.map((n,s)=>e.jsxs("span",{className:"flex items-center",children:[s>0&&e.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),e.jsx("span",{className:s===l.length-1?"text-gray-500":"text-pink-500 hover:text-pink-600 cursor-pointer",children:n.label})]},s))}),D=({children:l,className:n,onClick:s,...o})=>e.jsx("button",{className:n,onClick:s,...o,children:l}),F=({type:l,message:n,onClose:s})=>e.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 ${l==="success"?"bg-green-100 text-green-800 border border-green-200":l==="error"?"bg-red-100 text-red-800 border border-red-200":"bg-blue-100 text-blue-800 border border-blue-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:n}),e.jsx("button",{onClick:s,className:"ml-4 text-lg font-bold",children:"×"})]})}),M=()=>{var h,u,g,p,j,y,f,N,b,v,w,k,C,_;const[l,n]=i.useState(null),[s,o]=i.useState(null),[c,I]=i.useState(null),[P,m]=i.useState(!0),[x,L]=i.useState(null),O="https://leksycosmetics.com",d=t=>`₦${parseFloat(t).toLocaleString("en-NG",{minimumFractionDigits:2,maximumFractionDigits:2})}`,E=t=>new Date(t).toLocaleDateString("en-NG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});i.useEffect(()=>{const t=new URLSearchParams(window.location.search),a=t.get("order_id"),r=t.get("message"),S=window.pendingOrderDetails;S&&I(S),a?(L(a),U(a),r&&n({type:"success",message:decodeURIComponent(r)})):(n({type:"error",message:"No order information found."}),m(!1))},[]);const U=async t=>{try{m(!0);const a=await fetch(`${O}/api/fetch-order?order_id=${t}`),r=await a.json();if(console.log("API Response:",r),(r.code===200||r.code===1)&&r.product)o(r.product),window.pendingOrderDetails=null,r.product.amount_calculated!==r.product.amount_paid&&n({type:"error",message:"Payment verification failed. Please contact support."});else throw r.code===1&&r.message?new Error(r.message):a.ok?new Error(r.message||`Unexpected response format: ${JSON.stringify(r)}`):new Error(`HTTP ${a.status}: ${a.statusText}`)}catch(a){console.error("Error fetching order details:",a),n({type:"error",message:`Unable to load order details: ${a.message}. Please contact support if this persists.`})}finally{m(!1)}};i.useEffect(()=>{if(l){const t=setTimeout(()=>{n(null)},5e3);return()=>clearTimeout(t)}},[l]);const $=t=>{switch(t==null?void 0:t.toLowerCase()){case"delivered":return"text-green-600 bg-green-100";case"in-transit":return"text-blue-600 bg-blue-100";case"packaged":return"text-yellow-600 bg-yellow-100";case"order received":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}},A=t=>{switch(t==null?void 0:t.toLowerCase()){case"successful":return"text-green-600 bg-green-100";case"failed":return"text-red-600 bg-red-100";case"flagged":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}};return P?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"animate-spin mx-auto h-12 w-12 text-pink-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-gray-600",children:"Loading order details..."})]})})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l&&e.jsx(F,{type:l.type,message:l.message,onClose:()=>n(null)}),e.jsx(T,{items:[{label:"Home",path:"/"},{label:"Cart",path:"/cart"},{label:"Checkout",path:"/checkout"},{label:"Success",path:"/checkout/success"}]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Order Confirmed!"}),e.jsx("p",{className:"text-gray-600",children:"Thank you for your purchase. Your order has been successfully placed."}),x&&e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Order ID: ",e.jsx("span",{className:"font-mono font-medium",children:x})]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Order Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Payment Status:"}),e.jsx("div",{className:`inline-block ml-2 px-2 py-1 rounded-full text-xs font-medium ${A(s.order_status)}`,children:((h=s.order_status)==null?void 0:h.charAt(0).toUpperCase())+((u=s.order_status)==null?void 0:u.slice(1))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Delivery Status:"}),e.jsx("div",{className:`inline-block ml-2 px-2 py-1 rounded-full text-xs font-medium ${$(s.delivery_status)}`,children:((g=s.delivery_status)==null?void 0:g.charAt(0).toUpperCase())+((p=s.delivery_status)==null?void 0:p.slice(1))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Order Date:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:E(s.created_at)})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Customer Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Name:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Email:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.email})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Phone:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.phone})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Delivery Information"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Method:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.delivery_method==="pickup"?"Store Pickup":"Home Delivery"})]}),s.delivery_method==="address"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Address:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s["street address"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"City:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.city})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-600",children:"State:"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:s.state})]})]})]})]})]}),s&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Order Items"}),e.jsx("div",{className:"space-y-4",children:(j=s.cart_obj)==null?void 0:j.map((t,a)=>e.jsxs("div",{className:"flex items-center gap-4 py-4 border-b border-gray-100 last:border-b-0",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:t.product_image,alt:t.product_name,className:"w-full h-full object-cover",onError:r=>{r.target.src="/placeholder-product.jpg"}})}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800",children:t.product_name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Quantity: ",t.ordered_quantity]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Unit Price: ",d(t.product_price)]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-medium text-gray-800",children:d(t.product_price*t.ordered_quantity)})})]},a))}),e.jsxs("div",{className:"border-t border-gray-200 pt-4 mt-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold text-gray-800",children:"Total Paid:"}),e.jsx("span",{className:"text-lg font-bold text-pink-600",children:d(s.amount_paid)})]}),s.amount_calculated!==s.amount_paid&&e.jsx("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsx("p",{className:"text-sm text-red-600",children:"⚠️ Payment amount mismatch detected. Please contact support."})})]})]}),!s&&c&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-8",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.864-.833-2.634 0L3.232 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Order Processing"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Your payment was successful, but we're still processing your order details."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Customer Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Name: ",(y=c.customerInfo)==null?void 0:y.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Email: ",(f=c.customerInfo)==null?void 0:f.email]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",(N=c.customerInfo)==null?void 0:N.phone]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Delivery Information"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Method: ",((b=c.deliveryInfo)==null?void 0:b.method)==="pickup"?"Store Pickup":"Home Delivery"]}),((v=c.deliveryInfo)==null?void 0:v.method)==="address"&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Address: ",(w=c.deliveryInfo)==null?void 0:w.address]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["City: ",(k=c.deliveryInfo)==null?void 0:k.city]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["State: ",(C=c.deliveryInfo)==null?void 0:C.state]})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium text-gray-800",children:"Total:"}),e.jsx("span",{className:"font-bold text-pink-600",children:d(((_=c.orderSummary)==null?void 0:_.total)||0)})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(D,{onClick:()=>window.location.href="/",className:"bg-pink-500 hover:bg-pink-600 text-white px-8 py-3 rounded-md font-medium transition-colors cursor-pointer",children:"Continue Shopping"}),e.jsx(D,{onClick:()=>window.location.href="/account/orders",className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-8 py-3 rounded-md font-medium transition-colors cursor-pointer",children:"View All Orders"})]}),e.jsxs("div",{className:"text-center mt-8 p-6 bg-gray-50 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-2",children:"Need Help?"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"If you have any questions about your order, please don't hesitate to contact us."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center text-sm",children:[e.jsx("a",{href:"mailto:support@leksycosmetics.com",className:"text-pink-500 hover:text-pink-600",children:"📧 support@leksycosmetics.com"}),e.jsx("a",{href:"tel:+2348012345678",className:"text-pink-500 hover:text-pink-600",children:"📞 +234 801 234 5678"})]})]})]})]})};export{M as default};
//# sourceMappingURL=CheckoutSuccessPage-D1Z7UP0L.js.map
