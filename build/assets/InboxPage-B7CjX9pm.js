import{c as E,e as F,j as e,g as N}from"./index-M9bdpqMz.js";import{b as l}from"./vendor-Chw79xPl.js";import{R as v}from"./refresh-cw-D7OP5od0.js";import{M as g}from"./mail-D4TXmlJc.js";import{S as P}from"./search-1ZtBFY2y.js";import{U as z}from"./users-C5pHbcV-.js";import{C as H}from"./clock-Clwfga92.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],B=E("paperclip",Q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],O=E("send",K),Y=()=>{const[m,h]=l.useState([]),[r,k]=l.useState(null),[i,R]=l.useState(""),[f,p]=l.useState(""),[b,S]=l.useState(!0),[C,M]=l.useState(null),[d,x]=l.useState(null),j=t=>{if(!t)return"";const s=document.createElement("textarea");return s.innerHTML=t,s.value},D=t=>t?t.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().slice(0,2):"UN",T=(t,s)=>s?"from-gray-400 to-gray-500":"from-pink-500 to-rose-500";l.useEffect(()=>{y()},[]);const y=async()=>{try{S(!0),M(null),console.log("Fetching contact submissions...");const t=await F.fetchSubmissions({limit:100});console.log("API Response:",t);const s=t.data||t;if(s&&s.code===200){const a=s.submissions||[];if(console.log("Submissions data:",a),a&&a.length>0){const o=a.map((n,c)=>({id:n.id||n.submission_id||`msg_${c}`,name:j(n.name||"Unknown"),email:n.email||"",phone:n.phone||"",subject:j(n.subject||"No subject"),message:j(n.message||""),created_at:n.created_at||new Date().toISOString(),read:!1,replied:!1,date:U(n.created_at),time:_(n.created_at)}));console.log("Formatted messages:",o),h(o)}else console.log("No submissions found in response"),h([])}else{const a=(s==null?void 0:s.message)||(t==null?void 0:t.message)||"Failed to load messages - Invalid response format";throw console.error("API Error:",a,s||t),new Error(a)}}catch(t){const s=t.message||"Failed to load contact submissions";M(s),console.error("Error loading messages:",t),x({type:"error",message:`Error: ${s}`})}finally{S(!1)}},U=t=>{if(!t)return"Unknown";try{const s=new Date(t),a=new Date;if(isNaN(s.getTime()))return"Invalid Date";if(s.toDateString()===a.toDateString())return"Today";const o=new Date(a);return o.setDate(o.getDate()-1),s.toDateString()===o.toDateString()?"Yesterday":s.toLocaleDateString()}catch{return"Unknown"}},_=t=>{if(!t)return"";try{const s=new Date(t);if(isNaN(s.getTime()))return"";const o=new Date().getTime()-s.getTime(),n=Math.floor(o/1e3),c=Math.floor(n/60),u=Math.floor(c/60),w=Math.floor(u/24);return n<60?"now":c<60?c===1?"1 min ago":`${c} mins ago`:u<24?u===1?"1 hour ago":`${u} hours ago`:w<7?w===1?"1 day ago":`${w} days ago`:s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return""}},A=t=>{if(!t.read){const s=m.map(a=>a.id===t.id?{...a,read:!0}:a);h(s)}k(t),p("")},I=async()=>{if(!(!f.trim()||!r))try{await new Promise(s=>setTimeout(s,1e3)),x({type:"success",message:`Reply sent to ${r.name}!`}),p("");const t=m.map(s=>s.id===r.id?{...s,replied:!0}:s);h(t),k(s=>({...s,replied:!0}))}catch{x({type:"error",message:"Failed to send reply"})}};l.useEffect(()=>{if(d){const t=setTimeout(()=>{x(null)},5e3);return()=>clearTimeout(t)}},[d]);const L=m.filter(t=>t.name.toLowerCase().includes(i.toLowerCase())||t.email.toLowerCase().includes(i.toLowerCase())||t.subject.toLowerCase().includes(i.toLowerCase())||t.message.toLowerCase().includes(i.toLowerCase())),$={total:m.length,unread:m.filter(t=>!t.read).length};return b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 to-rose-50 flex items-center justify-center",children:e.jsx("div",{className:"bg-white/80 backdrop-blur-sm border border-white/20 rounded-2xl p-8 shadow-2xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(v,{className:"animate-spin h-8 w-8 text-pink-500"}),e.jsx("div",{className:"absolute inset-0 rounded-full bg-pink-500/20 animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-gray-800",children:"Loading your inbox"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Fetching contact messages..."})]})]})})}):C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 to-pink-50 flex flex-col items-center justify-center p-6",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm border border-white/20 rounded-2xl p-8 shadow-2xl max-w-md text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"h-8 w-8 text-pink-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Unable to Load Messages"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:C}),e.jsxs("button",{onClick:y,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white px-6 py-3 rounded-xl font-medium flex items-center gap-2 mx-auto transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsx(v,{className:"h-4 w-4"}),"Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-rose-50 to-purple-100",children:[d&&e.jsx("div",{className:`fixed top-6 right-6 p-4 rounded-2xl shadow-2xl z-50 transition-all duration-500 transform backdrop-blur-sm border ${d.type==="success"?"bg-emerald-50/90 text-emerald-800 border-emerald-200/50 shadow-emerald-500/20":"bg-red-50/90 text-red-800 border-red-200/50 shadow-red-500/20"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[d.type==="success"?e.jsx(N,{className:"h-5 w-5 text-emerald-600"}):e.jsx("div",{className:"w-5 h-5 rounded-full bg-red-600 text-white text-xs flex items-center justify-center",children:"!"}),e.jsx("span",{className:"font-medium",children:d.message})]}),e.jsx("button",{onClick:()=>x(null),className:"ml-4 text-gray-400 hover:text-gray-600 text-xl transition-colors",children:"Ã—"})]})}),e.jsxs("div",{className:"flex h-screen",children:[e.jsxs("div",{className:"w-96 bg-white/70 backdrop-blur-xl border-r border-white/20 flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100/60 bg-gradient-to-r from-white/50 to-pink-50/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-pink-500 to-rose-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(g,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Inbox"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Admin Dashboard"})]})]}),e.jsxs("button",{onClick:y,disabled:b,className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:opacity-50 text-white px-4 py-2.5 rounded-xl text-sm font-medium flex items-center gap-2 shadow-lg hover:shadow-xl transition-all duration-200",children:[e.jsx(v,{className:`h-4 w-4 ${b?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx(P,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-600 group-focus-within:text-pink-600 transition-colors z-10"}),e.jsx("input",{type:"text",className:"w-full pl-12 pr-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-300/80 rounded-xl text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:bg-white/90 focus:border-pink-400/80 transition-all duration-200 shadow-sm",placeholder:"Search messages...",value:i,onChange:t=>R(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-6 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-pink-50/60 rounded-lg",children:[e.jsx(z,{className:"h-4 w-4 text-pink-600"}),e.jsxs("span",{className:"text-sm font-medium text-pink-700",children:[$.total," Total"]})]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-orange-50/60 rounded-lg",children:[e.jsx(H,{className:"h-4 w-4 text-orange-600"}),e.jsxs("span",{className:"text-sm font-medium text-orange-700",children:[$.unread," Unread"]})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:L.length>0?e.jsx("div",{className:"p-4 space-y-2",children:L.map((t,s)=>e.jsx("div",{className:"group",children:e.jsx("div",{className:`p-4 cursor-pointer rounded-xl transition-all duration-300 hover:shadow-lg hover:scale-[1.02] ${(r==null?void 0:r.id)===t.id?"bg-gradient-to-r from-pink-50 to-rose-50 border-2 border-pink-200/60 shadow-lg":"bg-white/60 backdrop-blur-sm border border-gray-100/60 hover:bg-white/80"}`,onClick:()=>A(t),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center shadow-md bg-gradient-to-br ${T(t.name,t.read)}`,children:e.jsx("span",{className:"text-sm font-bold text-white",children:D(t.name)})}),!t.read&&e.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full border-2 border-white shadow-sm animate-pulse"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`text-sm font-semibold truncate ${t.read?"text-gray-600":"text-gray-900"}`,children:t.name}),e.jsx("span",{className:"text-xs text-gray-500 ml-2 flex-shrink-0 font-medium",children:t.time})]}),e.jsx("h3",{className:`text-sm mb-2 truncate ${t.read?"text-gray-600":"font-semibold text-gray-800"}`,children:t.subject}),e.jsx("p",{className:"text-xs text-gray-500 line-clamp-2 leading-relaxed",children:t.message}),e.jsxs("div",{className:"flex items-center justify-between mt-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:t.replied&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",children:[e.jsx(N,{className:"w-3 h-3"}),"Replied"]})}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:t.date})]})]})]})})},t.id))}):e.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-gray-400",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(g,{className:"h-10 w-10 text-gray-300"})}),e.jsx("p",{className:"text-lg font-semibold text-gray-500 mb-2",children:"No messages found"}),i&&e.jsx("p",{className:"text-sm text-gray-400",children:"Try adjusting your search terms"})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col bg-white/40 backdrop-blur-sm",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-gray-100/60 bg-gradient-to-r from-white/70 to-pink-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center shadow-xl bg-gradient-to-br ${T(r.name,r.read)}`,children:e.jsx("span",{className:"text-xl font-bold text-white",children:D(r.name)})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-1",children:r.name}),e.jsx("p",{className:"text-sm text-pink-600 font-medium mb-1",children:r.email}),r.phone&&e.jsx("p",{className:"text-sm text-gray-500",children:r.phone})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-1",children:r.date}),e.jsx("div",{className:"text-xs text-gray-500",children:r.time})]})]})})]})}),e.jsx("div",{className:"px-6 py-4 bg-gradient-to-r from-gray-50/80 to-pink-50/60 border-b border-gray-100/60",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:r.subject}),r.replied&&e.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-emerald-100/80 text-emerald-700 border border-emerald-200/60",children:[e.jsx(N,{className:"w-4 h-4"}),"Replied"]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-white/30",children:e.jsx("div",{className:"bg-white/60 backdrop-blur-sm rounded-2xl p-6 shadow-sm border border-gray-100/60",children:e.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line text-base",children:r.message})})}),e.jsx("div",{className:"p-6 border-t border-gray-100/60 bg-gradient-to-r from-white/70 to-pink-50/30 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(B,{className:"h-5 w-5 text-gray-500"})}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"text",className:"w-full px-4 py-4 bg-white/80 backdrop-blur-sm border border-gray-200/60 rounded-xl text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-pink-500/50 focus:bg-white/90 focus:border-pink-300/60 transition-all duration-200 shadow-sm",placeholder:`Reply to ${r.name}...`,value:f,onChange:t=>p(t.target.value),onKeyPress:t=>t.key==="Enter"&&f.trim()&&I()})}),e.jsx("button",{onClick:I,disabled:!f.trim(),className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 disabled:from-gray-300 disabled:to-gray-400 disabled:cursor-not-allowed text-white rounded-xl p-4 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105 disabled:hover:scale-100",children:e.jsx(O,{className:"h-5 w-5"})})]})})]}):e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center bg-gradient-to-br from-white/20 to-pink-50/40 backdrop-blur-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-pink-100 to-rose-100 rounded-full flex items-center justify-center mb-6 shadow-lg",children:e.jsx(g,{className:"h-12 w-12 text-pink-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-gray-700 mb-2",children:"Select a Message"}),e.jsx("p",{className:"text-gray-500 max-w-md",children:"Choose a message from the list to view its contents and reply to the sender."})]})})})]})]})},ee=()=>e.jsx("div",{className:"h-full",children:e.jsx(Y,{})});export{ee as default};
//# sourceMappingURL=InboxPage-B7CjX9pm.js.map
