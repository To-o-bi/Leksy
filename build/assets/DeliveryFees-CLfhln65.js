import{c as G,h as y,j as e,g as ne,C as D,X as P}from"./index-M9bdpqMz.js";import{b as i,f as ie}from"./vendor-Chw79xPl.js";import{S as V}from"./save-Bvx6sD78.js";import{C as de}from"./chevron-down-C3hJqJ0e.js";import{C as ce}from"./chevron-right-BpsnKVUa.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],q=G("building-2",oe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],S=G("map-pin",xe);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],O=G("pen",he);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],X=G("truck",me),je=()=>{const[o,f]=i.useState([]),[v,u]=i.useState([]),[C,T]=i.useState(!1),[x,h]=i.useState(!1),[F,_]=i.useState(new Set),[z,E]=i.useState(new Set),[m,b]=i.useState({}),[g,N]=i.useState({}),[w,M]=i.useState(null),[j,Z]=i.useState(""),[$,J]=i.useState(!1),Q=["Agege","Ajeromi-Ifelodun","Alimosho","Amuwo-Odofin","Apapa","Badagry","Epe","Eti-Osa","Ibeju-Lekki","Ifako-Ijaiye","Ikeja","Ikorodu","Kosofe","Lagos Island","Lagos Mainland","Mushin","Ojo","Oshodi-Isolo","Shomolu","Surulere"];i.useEffect(()=>{H(),R()},[]);const n=(s,a)=>{M({type:s,message:a}),setTimeout(()=>M(null),5e3)},H=async()=>{var s,a,t;T(!0);try{console.log("Fetching delivery fees...");const l=await y.get("/fetch-delivery-fees");console.log("API Response:",l.data);const r=l.data;if(r.code===200)f(r.delivery_fees||[]),n("success",r.message||`Loaded ${((s=r.delivery_fees)==null?void 0:s.length)||0} delivery fees`);else throw new Error(r.message||"Failed to fetch delivery fees")}catch(l){console.error("Error fetching delivery fees:",l),n("error",((t=(a=l.response)==null?void 0:a.data)==null?void 0:t.message)||l.message||"Failed to load delivery fees")}finally{T(!1)}},R=async()=>{try{console.log("Fetching Lagos LGAs...");const s=await y.get("/fetch-lagos-lgas");console.log("Lagos LGAs Response:",s.data);const a=s.data;if(a.code===200)u(a.lgas||[]);else throw new Error(a.message||"Failed to fetch Lagos LGAs")}catch(s){console.error("Error fetching Lagos LGAs:",s);const a=Q.map(t=>({lga:t,delivery_fee:0}));u(a),console.log("Using default Lagos LGAs - API endpoint may not be implemented yet")}},W=s=>{var t;const a=((t=o.find(l=>l.state===s))==null?void 0:t.delivery_fee)||0;_(l=>new Set([...l,s])),b(l=>({...l,[s]:a}))},ee=s=>{var t;const a=((t=v.find(l=>l.lga===s))==null?void 0:t.delivery_fee)||0;E(l=>new Set([...l,s])),N(l=>({...l,[s]:a}))},Y=s=>{_(a=>{const t=new Set(a);return t.delete(s),t}),b(a=>{const t={...a};return delete t[s],t})},K=s=>{E(a=>{const t=new Set(a);return t.delete(s),t}),N(a=>{const t={...a};return delete t[s],t})},se=async s=>{var t,l;const a=m[s];if(!a||a<0){n("error","Please enter a valid delivery fee");return}h(!0);try{console.log(`Updating delivery fee for ${s} to ${a}`);const r={[s]:a},c=await y.post("/admin/update-delivery-fees",null,{params:r});console.log("Update response:",c.data);const d=c.data;if(d.code===200)d.delivery_fees?f(d.delivery_fees):f(I=>I.map(p=>p.state===s?{...p,delivery_fee:parseInt(a)}:p)),Y(s),n("success",d.message||`Updated delivery fee for ${s} successfully`);else throw new Error(d.message||"Failed to update delivery fee")}catch(r){console.error("Error updating delivery fee:",r),n("error",((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||r.message||`Failed to update delivery fee for ${s}`)}finally{h(!1)}},ae=async s=>{var t,l;const a=g[s];if(a<0){n("error","Please enter a valid delivery fee");return}h(!0);try{console.log(`Updating LGA delivery fee for ${s} to ${a}`);const r={[s]:a},c=await y.post("/admin/update-lagos-lgas",null,{params:r});console.log("LGA Update response:",c.data);const d=c.data;if(d.code===200)d.lgas?u(d.lgas):u(I=>I.map(p=>p.lga===s?{...p,delivery_fee:parseInt(a)}:p)),K(s),n("success",d.message||`Updated delivery fee for ${s} LGA successfully`);else throw new Error(d.message||"Failed to update LGA delivery fee")}catch(r){console.error("Error updating LGA delivery fee:",r),n("error",((l=(t=r.response)==null?void 0:t.data)==null?void 0:l.message)||r.message||`Failed to update delivery fee for ${s}`)}finally{h(!1)}},te=async()=>{if(Object.keys(m).length===0){n("error","No changes to save");return}h(!0);try{console.log("Bulk updating delivery fees:",m);const s=await y.post("/admin/update-delivery-fees",null,{params:m});console.log("Bulk update response:",s.data);const a=s.data;if(a.code===200)a.delivery_fees?f(a.delivery_fees):f(t=>t.map(l=>m[l.state]!==void 0?{...l,delivery_fee:parseInt(m[l.state])}:l)),_(new Set),b({}),n("success","All delivery fees updated successfully");else throw new Error(a.message||"Failed to update delivery fees")}catch(s){console.error("Error updating delivery fees:",s),n("error",s.message||"Failed to update delivery fees")}finally{h(!1)}},le=async()=>{var s,a;if(Object.keys(g).length===0){n("error","No LGA changes to save");return}h(!0);try{console.log("Bulk updating Lagos LGA fees:",g);const t=await y.post("/admin/update-lagos-lgas",null,{params:g});console.log("Bulk LGA update response:",t.data);const l=t.data;if(l.code===200)l.lgas?u(l.lgas):u(r=>r.map(c=>g[c.lga]!==void 0?{...c,delivery_fee:parseInt(g[c.lga])}:c)),E(new Set),N({}),n("success",l.message||"All Lagos LGA fees updated successfully");else throw new Error(l.message||"Failed to update LGA fees")}catch(t){console.error("Error updating LGA fees:",t),n("error",((a=(s=t.response)==null?void 0:s.data)==null?void 0:a.message)||t.message||"Failed to update LGA fees")}finally{h(!1)}},L=s=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0}).format(s),k=o.filter(s=>s.state.toLowerCase().includes(j.toLowerCase())),re=v.filter(s=>s.lga.toLowerCase().includes(j.toLowerCase())),U=F.size,B=z.size,A=s=>s.toLowerCase()==="lagos";return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen",children:[w&&e.jsxs("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg flex items-center gap-2 ${w.type==="success"?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[w.type==="success"?e.jsx(ne,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"}),e.jsx("span",{children:w.message}),e.jsx("button",{onClick:()=>M(null),className:"ml-2 text-gray-500 hover:text-gray-700",children:e.jsx(P,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-pink-100 rounded-lg",children:e.jsx(X,{className:"w-6 h-6 text-pink-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Delivery Fee Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage delivery fees for all Nigerian states and Lagos LGAs"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:"Search states or LGAs...",value:j,onChange:s=>Z(s.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{H(),R()},disabled:C,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:C?"Loading...":"Refresh"}),B>0&&e.jsxs("button",{onClick:le,disabled:x,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(q,{className:"w-4 h-4"}),x?"Saving...":`Save LGA Changes (${B})`]}),U>0&&e.jsxs("button",{onClick:te,disabled:x,className:"px-4 py-2 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50 flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),x?"Saving...":`Save State Changes (${U})`]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total States"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]}),e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx(S,{className:"w-6 h-6 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Lagos LGAs"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.length})]}),e.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:e.jsx(q,{className:"w-6 h-6 text-purple-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Average State Fee"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length>0?L(o.reduce((s,a)=>s+a.delivery_fee,0)/o.length):L(0)})]}),e.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:e.jsx(X,{className:"w-6 h-6 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Changes"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:U+B})]}),e.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:e.jsx(O,{className:"w-6 h-6 text-yellow-600"})})]})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"How to use:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Click the edit icon to modify a delivery fee for any state"}),e.jsx("li",{children:"You can edit multiple states at once and save all changes together"}),e.jsx("li",{children:"Use the search box to quickly find specific states"}),e.jsx("li",{children:"Changes will be immediately reflected on the checkout page"})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Delivery Fees by State",k.length!==o.length&&e.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",k.length," of ",o.length,")"]})]})}),C?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-pink-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading delivery fees..."})]}):k.length===0?e.jsxs("div",{className:"p-8 text-center text-gray-500",children:[e.jsx(S,{className:"w-12 h-12 mx-auto mb-4 text-gray-300"}),e.jsxs("p",{children:["No delivery fees found",j&&` matching "${j}"`]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Delivery Fee"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:k.map(s=>e.jsxs(ie.Fragment,{children:[e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[A(s.state)&&e.jsx("button",{onClick:()=>J(!$),className:"p-1 hover:bg-gray-200 rounded mr-2",children:$?e.jsx(de,{className:"w-4 h-4 text-gray-600"}):e.jsx(ce,{className:"w-4 h-4 text-gray-600"})}),e.jsx("div",{className:"p-1 bg-gray-100 rounded mr-3",children:e.jsx(S,{className:"w-4 h-4 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.state}),A(s.state)&&e.jsxs("div",{className:"text-xs text-gray-500",children:[v.length," LGAs available"]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:F.has(s.state)?e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-gray-500 mr-1",children:"₦"}),e.jsx("input",{type:"number",value:m[s.state]||"",onChange:a=>b(t=>({...t,[s.state]:parseInt(a.target.value)||0})),className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-pink-500 focus:border-pink-500",min:"0",step:"100"})]}):e.jsxs("div",{className:"text-sm text-gray-900 font-medium",children:[L(s.delivery_fee),A(s.state)&&e.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(Base rate)"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:F.has(s.state)?e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{onClick:()=>se(s.state),disabled:x,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Y(s.state),disabled:x,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:e.jsx(P,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:()=>W(s.state),className:"text-pink-600 hover:text-pink-700",children:e.jsx(O,{className:"w-4 h-4"})})})]}),A(s.state)&&$&&e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"px-6 py-4 bg-gray-50",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Lagos State LGAs"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:re.map(a=>e.jsx("div",{className:"bg-white p-3 rounded border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-4 h-4 text-gray-500 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:a.lga})]}),e.jsx("div",{className:"flex items-center gap-2",children:z.has(a.lga)?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-500 text-xs",children:"₦"}),e.jsx("input",{type:"number",value:g[a.lga]||"",onChange:t=>N(l=>({...l,[a.lga]:parseInt(t.target.value)||0})),className:"w-16 text-xs px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500",min:"0",step:"100"}),e.jsx("button",{onClick:()=>ae(a.lga),disabled:x,className:"text-green-600 hover:text-green-700 disabled:opacity-50",children:e.jsx(V,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>K(a.lga),disabled:x,className:"text-gray-400 hover:text-gray-600 disabled:opacity-50",children:e.jsx(P,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-gray-900",children:L(a.delivery_fee)}),e.jsx("button",{onClick:()=>ee(a.lga),className:"text-blue-600 hover:text-blue-700",children:e.jsx(O,{className:"w-3 h-3"})})]})})]})},a.lga))})]})})})]},s.state))})]})})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"How to use:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-blue-700",children:[e.jsx("li",{children:"Click the edit icon to modify a delivery fee for any state"}),e.jsx("li",{children:"For Lagos State, click the arrow to expand and manage individual LGA fees"}),e.jsx("li",{children:"You can edit multiple states and LGAs at once and save all changes together"}),e.jsx("li",{children:"Use the search box to quickly find specific states or LGAs"}),e.jsx("li",{children:"LGA-specific fees will override the base Lagos State fee for checkout"}),e.jsx("li",{children:"Changes will be immediately reflected on the checkout page"})]})]})]})})]})};export{je as default};
//# sourceMappingURL=DeliveryFees-CLfhln65.js.map
