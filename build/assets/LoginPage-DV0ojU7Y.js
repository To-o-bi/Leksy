import{c as N,u as C,j as e,C as w}from"./index-M9bdpqMz.js";import{u as L,c as E,b as o}from"./vendor-Chw79xPl.js";import{E as M}from"./eye-C17Yuevi.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],U=N("eye-off",q);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],j=N("log-in",_),$=()=>{const c=L(),m=E(),{login:v,isAuthenticated:g,isLoading:u}=C(),[a,p]=o.useState({username:"",password:""}),[x,k]=o.useState(!1),[i,l]=o.useState(""),[n,f]=o.useState(!1),b=()=>{var s,r;return new URLSearchParams(m.search).get("redirect")||((r=(s=m.state)==null?void 0:s.from)==null?void 0:r.pathname)||"/admin/dashboard"},S=()=>{const t=new URLSearchParams(m.search),s=t.get("reason"),r=t.get("expired");return s==="session_expired"||r==="true"?{type:"warning",message:"Session expired. Please login again."}:s==="authentication_required"?{type:"info",message:"Please login to access this page."}:null},y=t=>{const{name:s,value:r}=t.target;p(h=>({...h,[s]:s==="username"?r.trim():r})),i&&l("")},P=async t=>{if(t.preventDefault(),!a.username){l("Username is required");return}if(!a.password){l("Password is required");return}f(!0),l("");try{await v(a.username,a.password),setTimeout(()=>c(b(),{replace:!0}),100)}catch(s){let r="Login failed. Please try again.";s.message.includes("Invalid")||s.message.includes("Unauthorized")?(r="Invalid username or password.",p(h=>({...h,password:""}))):s.message.includes("Network")?r="Network error. Check your connection.":s.message.includes("timeout")?r="Request timed out. Try again.":s.message&&(r=s.message),l(r)}finally{f(!1)}};if(o.useEffect(()=>{!u&&g&&c(b(),{replace:!0})},[g,u,c]),u)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Checking authentication..."})]})});const d=S();return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto h-16 w-16 rounded-full bg-blue-500 flex items-center justify-center shadow-lg",children:e.jsx(j,{className:"h-8 w-8 text-white"})}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Admin Login"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to manage Leksy Cosmetics"})]}),d&&e.jsx("div",{className:`p-4 rounded-md border ${d.type==="error"?"bg-red-50 border-red-200 text-red-800":d.type==="warning"?"bg-yellow-50 border-yellow-200 text-yellow-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-5 h-5 mr-2"}),e.jsx("span",{className:"text-sm",children:d.message})]})}),e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",required:!0,className:`w-full px-3 py-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i?"border-red-300":"border-gray-300"}`,placeholder:"Enter username",value:a.username,onChange:y,disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",name:"password",type:x?"text":"password",required:!0,className:`w-full px-3 py-2 pr-10 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i?"border-red-300":"border-gray-300"}`,placeholder:"Enter password",value:a.password,onChange:y,disabled:n}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>k(!x),disabled:n,children:x?e.jsx(U,{className:"h-4 w-4 text-gray-400"}):e.jsx(M,{className:"h-4 w-4 text-gray-400"})})]})]}),i&&e.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"w-5 h-5 text-red-500 mr-2"}),e.jsx("span",{className:"text-sm text-red-800",children:i})]})}),e.jsx("button",{type:"submit",disabled:n||!a.username||!a.password,className:`w-full flex justify-center py-2.5 px-4 border border-transparent text-sm font-medium rounded-md text-white ${n||!a.username||!a.password?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-blue-500"}`,children:n?e.jsxs("div",{className:"flex items-center",children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):e.jsxs("div",{className:"flex items-center",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Sign in"]})})]})]})})};export{$ as default};
//# sourceMappingURL=LoginPage-DV0ojU7Y.js.map
