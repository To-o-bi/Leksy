import{b as D,W as _,j as e,d as A}from"./index-M9bdpqMz.js";import{u as E,b as l,f as P,L as W}from"./vendor-Chw79xPl.js";import{N as H}from"./Notification-SFVOOW3C.js";const p=s=>{if(!s||typeof s!="string")return s;const c={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&apos;":"'","&#x27;":"'","&#x2F;":"/","&#x60;":"`","&#x3D;":"="};return s.replace(/&[#\w]+;/g,d=>c[d]||d)},Q=({product:s,isModal:c=!1})=>{var M;const{addToCart:d}=D(),y=E(),[n,g]=l.useState(1),[h,r]=l.useState(null),[m,f]=l.useState(0),{wishlist:u,addToWishlist:j,removeFromWishlist:v}=l.useContext(_)||{},t=P.useMemo(()=>{var i;return s?{id:s.product_id||s.id||s._id,name:p(s.name||s.title||s.product_name||"Unknown Product"),price:parseFloat(s.price)||parseFloat(s.cost)||0,originalPrice:s.slashed_price?parseFloat(s.slashed_price):void 0,description:p(s.description||s.desc||""),image:((i=s.images)==null?void 0:i[0])||s.image||"/placeholder-image.jpg",images:s.images||(s.image?[s.image]:["/placeholder-image.jpg"]),category:p(s.category||s.category_name||"Uncategorized"),brand:p(s.brand||s.manufacturer||""),stock:parseInt(s.available_qty)||parseInt(s.stock)||parseInt(s.inventory)||0,rating:parseFloat(s.rating)||0,reviews:s.reviews||[],benefits:s.key_benefits||s.benefits||s.features||[],isNew:s.isNew||s.is_new||!1,discount:s.discount||(s.slashed_price&&s.price?Math.round((s.slashed_price-s.price)/s.slashed_price*100):0)}:null},[s]),x=P.useMemo(()=>!(t!=null&&t.id)||!Array.isArray(u)?!1:u.some(i=>(i.id||i.product_id||i._id)===t.id),[u,t==null?void 0:t.id]);if(!t||!t.id)return e.jsx("div",{className:"container mx-auto px-4 py-8 text-center",children:e.jsxs("div",{className:"bg-yellow-100 border border-yellow-400 text-yellow-700 px-4 py-3 rounded",children:[e.jsx("h3",{className:"font-bold",children:"Product data not available"}),e.jsx("p",{children:"Unable to load product information. Please try again."})]})});const a=((M=t.images)==null?void 0:M.length)>0?t.images:[t.image||"/placeholder-image.jpg"],b=i=>{const o=parseInt(i.target.value);o>0&&o<=(t.stock||10)&&g(o)},F=()=>{n<(t.stock||10)&&g(n+1)},I=()=>{n>1&&g(n-1)},B=()=>{d({id:t.id,name:t.name,price:t.price,image:a[0],quantity:n}),r({type:"success",message:"Product added to cart!"}),setTimeout(()=>{r(null)},3e3)},T=()=>{d({id:t.id,name:t.name,price:t.price,image:a[0],quantity:n}),y("/checkout")},z=()=>{navigator.share?navigator.share({title:t.name,text:`Check out this amazing product: ${t.name}`,url:window.location.href}).then(()=>{r({type:"success",message:"Product shared successfully!"}),setTimeout(()=>{r(null)},3e3)}).catch(()=>{k()}):k()},k=()=>{navigator.clipboard.writeText(window.location.href).then(()=>{r({type:"success",message:"Product link copied to clipboard!"}),setTimeout(()=>{r(null)},3e3)}).catch(()=>{r({type:"error",message:"Failed to copy link. Please try again."}),setTimeout(()=>{r(null)},3e3)})},S=()=>{if(!j||!v){r({type:"error",message:"Wishlist functionality is not available."}),setTimeout(()=>{r(null)},3e3);return}const i={id:t.id,name:t.name,price:t.price,image:a[0]};x?(v(t.id),r({type:"info",message:"Product removed from wishlist!"})):(j(i),r({type:"success",message:"Product added to wishlist!"})),setTimeout(()=>{r(null)},3e3)},N=i=>{i.target.onerror=null,i.target.src="/placeholder-image.jpg"},$=i=>{f(i)},C=i=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(i),L=t.originalPrice||(t.discount>0?Math.round(t.price/(1-t.discount/100)):null);return e.jsxs("div",{className:"bg-white",children:[h&&e.jsx(H,{type:h.type,message:h.message,onClose:()=>r(null)}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[!c&&e.jsxs("div",{className:"text-sm text-gray-500 mb-6",children:[e.jsx("span",{className:"hover:text-gray-700 cursor-pointer",children:"Home"})," >",t.category&&t.category!=="Uncategorized"&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"hover:text-gray-700 cursor-pointer",children:[" ",t.category]})," >"]}),e.jsxs("span",{className:"text-gray-700",children:[" ",t.name]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 relative bg-gray-50 rounded-lg overflow-hidden",children:[e.jsx("img",{src:a[m],alt:t.name,className:"w-full h-96 object-contain",onError:N}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col space-y-2",children:[e.jsx("button",{className:"bg-white rounded-full p-2 shadow-md hover:bg-gray-100 transition-colors duration-200",onClick:z,"aria-label":"Share product",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})})}),e.jsx("button",{className:`rounded-full p-2 shadow-md transition-colors duration-200 ${x?"bg-pink-50 text-pink-500":"bg-white hover:bg-gray-100"}`,onClick:S,"aria-label":x?"Remove from wishlist":"Add to wishlist",children:x?e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})}):e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"absolute top-4 left-4 flex flex-col space-y-2",children:[t.isNew&&e.jsx("div",{className:"bg-green-600 text-white text-xs font-medium px-2.5 py-1 rounded-sm",children:"New"}),t.discount>0&&e.jsxs("div",{className:"bg-red-600 text-white text-xs font-medium px-2.5 py-1 rounded-sm",children:["-",t.discount,"%"]})]})]}),a.length>1&&e.jsx("div",{className:"grid grid-cols-5 gap-2",children:a.map((i,o)=>e.jsx("div",{className:`border rounded-md overflow-hidden cursor-pointer transition-all ${m===o?"border-pink-500 border-2 opacity-100":"border-gray-200 opacity-70 hover:opacity-100"}`,onClick:()=>$(o),children:e.jsx("img",{src:i,alt:`${t.name} ${o+1}`,className:"w-full h-16 object-cover",onError:N})},o))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:t.name}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:C(t.price)}),(L||t.originalPrice)&&e.jsx("span",{className:"text-lg text-gray-400 line-through",children:C(L||t.originalPrice)}),t.discount>0&&e.jsxs("span",{className:"text-sm font-medium text-red-600",children:["Save ",t.discount,"%"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`inline-block w-3 h-3 rounded-full mr-2 ${t.stock>0?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-sm",children:t.stock>0?t.stock<=5?`Only ${t.stock} left in stock`:"In Stock":"Out of Stock"})]}),t.description&&e.jsx("div",{className:"text-gray-600",children:e.jsx("p",{children:t.description})}),t.brand&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Brand: "}),e.jsx("span",{children:t.brand})]}),t.stock>0&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-3 text-sm font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex border border-gray-300 rounded-md",children:[e.jsx("button",{onClick:I,className:"px-3 py-1 border-r border-gray-300 hover:bg-gray-100",disabled:n<=1,children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 12H4"})})}),e.jsx("input",{type:"number",value:n,onChange:b,min:"1",max:t.stock||10,className:"w-12 text-center focus:outline-none"}),e.jsx("button",{onClick:F,className:"px-3 py-1 border-l border-gray-300 hover:bg-gray-100",disabled:n>=(t.stock||10),children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 4v16m8-8H4"})})})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{className:"bg-pink-500 hover:bg-pink-600 text-white py-3 px-6 rounded-md font-medium w-full transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center",onClick:B,disabled:t.stock<=0,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Add To Cart"]}),e.jsx("button",{className:"bg-white hover:bg-gray-100 text-gray-800 py-3 px-6 rounded-md font-medium border border-gray-300 w-full transition duration-200 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed",onClick:T,disabled:t.stock<=0,children:"Checkout Now"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium mb-4",children:"Key Benefits:"}),e.jsx("ul",{className:"space-y-2",children:t.benefits&&t.benefits.length>0?t.benefits.map((i,o)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:p(i)})]},o)):e.jsxs(e.Fragment,{children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"High quality product"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Fast delivery"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("svg",{className:"h-5 w-5 text-green-500 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:"Customer satisfaction guaranteed"})]})]})})]})]})]})]})]})},w=s=>{if(typeof s!="string")return s;const c=document.createElement("textarea");return c.innerHTML=s,c.value},V=({product:s})=>{const{isInWishlist:c,addToWishlist:d,removeFromWishlist:y}=l.useContext(_),{addToCart:n}=l.useContext(A),[g,h]=l.useState(!1),r=l.useMemo(()=>{var b;if(!s)return null;const a=s.product_id||s.id||s._id||s.productId;return a?{id:a,name:w(s.name||s.title||s.product_name||"Unknown Product"),price:parseFloat(s.price)||parseFloat(s.cost)||0,originalPrice:s.slashed_price?parseFloat(s.slashed_price):void 0,image:((b=s.images)==null?void 0:b[0])||s.image||"/placeholder-image.jpg",images:s.images||(s.image?[s.image]:[]),category:w(s.category||s.category_name||"Uncategorized"),stock:parseInt(s.available_qty)||parseInt(s.stock)||parseInt(s.inventory)||0,isNew:s.isNew||s.is_new||!1,discount:s.discount||(s.slashed_price&&s.price?Math.round((s.slashed_price-s.price)/s.slashed_price*100):0),description:w(s.description||s.desc||""),brand:w(s.brand||s.manufacturer||""),...s}:(console.error("ProductCard: No valid product ID found",s),null)},[s]),m=l.useMemo(()=>r?c(r.id):!1,[r,c]),f=l.useMemo(()=>a=>new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN",minimumFractionDigits:0,maximumFractionDigits:0}).format(a),[]),u=a=>{a.preventDefault(),a.stopPropagation(),m?y(r.id):d(r)},j=a=>{a.preventDefault(),a.stopPropagation(),n(r)},v=a=>{a.preventDefault(),a.stopPropagation(),h(!0)};if(!r)return e.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[e.jsx("strong",{children:"Error:"})," Invalid product data"]});const t=()=>e.jsxs(e.Fragment,{children:[r.isNew&&e.jsx("div",{className:"absolute top-3 left-3 z-10 bg-green-600 text-white text-xs font-medium px-2.5 py-1 rounded-sm",children:"New"}),r.discount>0&&e.jsxs("div",{className:"absolute top-3 right-12 z-10 bg-red-600 text-white text-xs font-medium px-2.5 py-1 rounded-sm",children:["-",r.discount,"%"]})]}),x=()=>r.stock===0?e.jsx("span",{className:"text-xs text-red-600 font-medium",children:"Out of Stock"}):r.stock<=5?e.jsxs("span",{className:"text-xs text-orange-600 font-medium",children:["Only ",r.stock," left"]}):null;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"group relative bg-white rounded-lg border border-gray-200 overflow-hidden transition-all duration-200 hover:shadow-lg",children:[e.jsxs("div",{className:"relative overflow-hidden pt-[100%]",children:[t(),e.jsx("button",{onClick:v,"aria-label":"Quick view",className:"absolute top-3 right-3 z-10 bg-white rounded-full p-2 shadow-md hover:bg-gray-100 transition-colors",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsxs(W,{to:`/product/${r.id}`,className:"block absolute inset-0",children:[e.jsx("img",{src:r.image,alt:r.name,className:"absolute top-0 left-0 w-full h-full object-cover object-center transition-transform duration-500 ease-out group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center opacity-0 transform translate-y-4 group-hover:opacity-100 group-hover:translate-y-0 transition-all duration-300 ease-out",children:e.jsxs("button",{onClick:j,disabled:r.stock===0,"aria-label":"Add to cart",className:"bg-white text-gray-800 rounded-md py-2 px-4 text-sm font-semibold shadow-md hover:bg-gray-800 hover:text-white transition-colors duration-200 flex items-center disabled:bg-gray-300 disabled:cursor-not-allowed",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"Add to Cart"]})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-1",children:[e.jsx(W,{to:`/product/${r.id}`,className:"flex-1",children:e.jsx("h3",{className:"text-gray-600 font-medium text-sm leading-tight hover:text-gray-800 transition-colors line-clamp-2",children:r.name})}),e.jsx("button",{onClick:u,"aria-label":m?"Remove from wishlist":"Add to wishlist",className:`ml-2 w-8 h-8 rounded-full flex items-center justify-center transition-colors duration-200 ${m?"bg-pink-50 text-pink-500":"bg-gray-50 text-gray-400 hover:text-pink-500 hover:bg-pink-50"}`,children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:m?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900 font-semibold text-lg",children:f(r.price)}),r.originalPrice&&e.jsx("p",{className:"text-gray-500 text-xs line-through",children:f(r.originalPrice)})]}),x()]})]})]}),g&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:[e.jsx("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 bg-gray-100 rounded-full p-2 hover:bg-gray-200 transition-colors z-10",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx(Q,{product:r,isModal:!0})]})})]})};export{V as P,Q as a};
//# sourceMappingURL=ProductCard-D2uh7JqJ.js.map
